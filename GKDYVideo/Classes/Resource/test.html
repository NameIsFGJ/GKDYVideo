<!Doctype html>
<html>
<head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <script src="https://www.jq22.com/jquery/jquery-3.3.1.js"></script>
    <style type='text/css'>
        html {
            font-family: Helvetica;
            color: #222;
        }

        h1 {
            color: steelblue;
            font-size: 24px;
            margin-top: 24px;
        }

        button {
            margin: 0 3px 10px;
            font-size: 12px;
        }
    </style>
</head>

<body>
<h1>WebViewJavascriptBridge Demo</h1>

<script>

  /*这段代码是固定的，必须要放到js中*/
  function setupWebViewJavascriptBridge(callback) {
    if (window.WebViewJavascriptBridge) {
      return callback(WebViewJavascriptBridge);
    }
    if (window.WVJBCallbacks) {
      return window.WVJBCallbacks.push(callback);
    }
    window.WVJBCallbacks = [callback];
    var WVJBIframe = document.createElement('iframe');
    WVJBIframe.style.display = 'none';
    WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
    document.documentElement.appendChild(WVJBIframe);
    setTimeout(function () {
      document.documentElement.removeChild(WVJBIframe)
    }, 0)
  }

  /*与OC交互的所有JS方法都要放在此处注册，才能调用通过JS调用OC或者让OC调用这里的JS*/
  setupWebViewJavascriptBridge(function (bridge) {


    $('#blogId').on('click', function () {
                    alert('asdfasdf')
                    bridge.callHandler('getUserToken', function (data) {
                                       $('#buttons').text(data)
                                         $('#log').text('asdfasfssss')
      })
    })
  })

</script>

<div id='buttons'></div>
<div id='log'></div>

<div>
    <input type="button" value="getBlogNameFromObjC" id="blogId"/>
</div>
</body>
</html>
